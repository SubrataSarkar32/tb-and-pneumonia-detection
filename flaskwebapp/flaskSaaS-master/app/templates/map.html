{% extends "layout.html" %}

{% block head %}
    {{ super() }}
    <!-- Leaflet JS -->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.js'></script>
    <!-- Leaflet CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.9/mapbox.css' rel='stylesheet'/>
    <!-- Map style -->
    <style>
    #map {
    	height: 600px;
    }
    </style>
{% endblock %}

{% block content %}

	   <h1 class="ui header">{{ title }}</h1>

    {% if current_user.is_authenticated %}
        <h2 class="ui header">Hi {{ current_user.name }}!</h2>
    {% endif %}

     <div id="map">
              <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3684.37070244257!2d88.38924591449822!3d22.565234585186534!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a02767d397506af%3A0x2b352e7f5c0bdb12!2sGovernment+College+of+Engineering+And+Ceramic+Technology!5e0!3m2!1sen!2sin!4v1551210612470" width="100%" height="400vh" frameborder="0" style="border:0" allowfullscreen></iframe>
    </div>
    <!--div id="map"></div-->

    <script type="text/javascript">
    /*

        L.mapbox.accessToken = 'pk.eyJ1IjoibGVtYXgiLCJhIjoidnNDV1kzNCJ9.iH26jLhEuimYd6vLOO6v1g';
        var map = L.mapbox.map('map', 'mapbox.outdoors', {
            maxZoom: 20,
            fullscreenControl: true,
            zoomControl: false
        })
        var layers = {
            "Baisc": L.mapbox.tileLayer('mapbox.outdoors').addTo(map),
            "Light": L.mapbox.tileLayer('mapbox.light'),
            "Dark": L.mapbox.tileLayer('mapbox.dark'),
            "Comics": L.mapbox.tileLayer('mapbox.comic'),
            "Pencil": L.mapbox.tileLayer('mapbox.pencil')
        }
        L.control.layers(
            layers,
            null,
            {position: 'topleft'}
        ).addTo(map);
        map.setView({{[22.5645694,88.3919392]}}, 13);




        markers = [];

        function remove_points(points){
            for (i in points){
                map.removeLayer(points[i])
            }
        }

        function refresh_points(){
            $.ajax({
                type: "POST",
                async: true,
                url: "/map/refresh"
            }).done(function(response){
                remove_points(markers);
                points = response.points;
                for (i in points){
                    marker = L.marker(points[i]);
                    markers.push(marker);
                    marker.addTo(map);
                }
            });
        }

        refresh_points();
        window.setInterval(function(){
            refresh_points();
        }, 1000);
        */
    </script>

{% endblock %}